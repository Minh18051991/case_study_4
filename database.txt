create database case_study_4;
use case_study_4;
-- thêm bảng role
create table role
(
    id        int primary key auto_increment,
    name      varchar(50),
    is_delete boolean default false
);
-- thêm bảng account
create table account
(
    id        int primary key auto_increment,
    username  varchar(100) unique not null,
    password  text                not null,
    is_delete boolean default false
);

-- them bang account_role
create table account_role
(
    id         int primary key auto_increment,
    account_id int,
    role_id    int,
    unique (account_id, role_id),
    foreign key (account_id) references account (id),
    foreign key (role_id) references role (id)
);
-- thêm bảng position
create table employee_position
(
    id        int primary key auto_increment,
    name      varchar(100) not null,
    is_delete boolean default false
);
-- thêm bảng employee
create table employee
(
    id          int primary key auto_increment,
    name        varchar(100)        not null,
    email       varchar(100) unique not null,
    gender      boolean,
    address     varchar(255),
    phone       varchar(20),
    birth_date  date,
    image_url   text,
    salary      decimal(10, 2),
    is_delete   boolean default false,
    position_id int,
    foreign key (position_id) references employee_position (id),
    account_id  int,
    foreign key (account_id) references account (id)
);
-- thêm bảng course
create table course
(
    id        int primary key auto_increment,
    name      varchar(100) not null,
    duration  varchar(50),-- thời gian học 1 khóa
    is_delete boolean default false
);
-- thêm bảng module
create table module
(
    id        int primary key auto_increment,
    name      varchar(100) not null,
    is_delete boolean default false,
    course_id int,
    foreign key (course_id) references course (id)
);
-- thêm bảng lesson
create table lesson
(
    id        int primary key auto_increment,
    name      varchar(100) not null,
    is_delete boolean default false,
    module_id int,
    foreign key (module_id) references module (id)
);
-- thêm bảng category_activity
create table category_activity
(
    id        int primary key auto_increment,
    name      varchar(100) not null,
    is_delete boolean default false
);
-- thêm bảng activity
create table activity
(
    id                   int primary key auto_increment,
    name                 varchar(100) not null,
    is_delete            boolean default false,
    category_activity_id int,
    foreign key (category_activity_id) references category_activity (id),
    lesson_id            int,
    foreign key (lesson_id) references lesson (id)
);
-- thêm bảng class
create table class
(
    id          int primary key auto_increment,
    name        varchar(100),
    start_date  datetime default current_timestamp,
    is_delete   boolean  default false,
    employee_id int,
    foreign key (employee_id) references employee (id),
    course_id   int,
    foreign key (course_id) references course (id)
);
-- thêm bảng student
create table student
(
    id         int primary key auto_increment,
    name       varchar(100)        not null,
    email      varchar(100) unique not null,
    gender     boolean,
    address    varchar(255),
    phone      varchar(20),
    birth_date date,
    image_url  text,
    is_delete  boolean default false,
    class_id   int,
    foreign key (class_id) references class (id),
    account_id int,
    foreign key (account_id) references account (id)
);
-- thêm bảng điểm danh(attendance)
create table attendance
(
    id          int primary key auto_increment,
    create_at   datetime default current_timestamp,
    status      enum ('VANG_CO_PHEP','CO_MAT','DI_MUON','ANG_KHONG_PHEP'),
    note        text,
    is_delete   boolean  default false,
    student_id  int,
    foreign key (student_id) references student (id),
    class_id    int,
    foreign key (class_id) references class (id),
    employee_id int,
    foreign key (employee_id) references employee (id)
);
-- thêm bảng nhật ký(diary)
create table dailynote
(
    id          int primary key auto_increment,
    create_at   datetime default current_timestamp,
    content     text,
    is_delete   boolean  default false,
    employee_id int,
    foreign key (employee_id) references employee (id),
    class_id    int,
    foreign key (class_id) references class (id)
);
-- thêm bảng tiến trình học tập(progress)
create table progress
(
    id          int primary key auto_increment,
    status      boolean default false,
    is_delete   boolean default false,
    student_id  int,
    foreign key (student_id) references student (id),
    activity_id int,
    foreign key (activity_id) references activity (id)
);
-- thêm bảng điểm số (score)
create table score
(
    id         int primary key auto_increment,
    theory     double,
    practice   double,
    is_delete  boolean default false,
    student_id int,
    foreign key (student_id) references student (id),
    module_id  int,
    foreign key (module_id) references module (id)
);

-- Them du lieu vao bang Category_activity
insert into category_activity (name)
values ('Bài tập'),
       ('Bài đọc'),
       ('Bài thực hành'),
       ('Bài Giảng');
-- Them du lieu vao bang course
insert into course (name, duration)
values ('Java Fullstack', '6 tháng'),
       ('PHP', '4 tháng'),
       ('Python', '5 tháng'),
       ('C#', '3 tháng');
-- Them du lieu vao bang module
insert into module (name, course_id)
values ('[BC-JAVA-APJ] Advanced Programming with Java 2.1', 1),
       ('[BC-JAVA-WBDS] Web Back-end Development with Spring MVC 2.1', 1);

-- Them du lieu vao bang lesson
insert into lesson (name, module_id)
values (' Introduction to Java', 1),
       ('Vòng lặp trong Java', 1),
       ('Mảng và phương thức trong Java', 1),
       ('Lớp và đối tượng trong Java', 1),
       ('Access modifier, static method, static property', 1),
       ('Kế thừa', 1),
       ('Abstract Class & Interface', 1),
       ('IO: Text File', 1),
       ('IO: Binary File & Serialization', 1),
       ('Threading', 1),
       ('String & Regex', 1),
       ('OOAD & SOLID', 1),
       ('Behavioral Design Pattern', 1),
       ('Tổng quan Spring MVC', 2),
       ('SpringController', 2),
       ('View và thymeleaf', 2),
       ('Data Binding & Form', 2),
       ('Spring Data Repository', 2);


-- Them du liệu vào bảng activity vi dụ :bài đầu tiên lesson 1 thi co 4 activity tuong ung voi 4 category_activity,dua tren bang lesson phia tren them du lieu vao.
insert into activity (name, category_activity_id, lesson_id)
values ('Các công nghệ, công cụ sử dụng trong module', 2, 1),
       ('Cú pháp ngôn ngữ Java cơ bảnPage', 4, 1),
       (' Giới thiệu ngôn ngữ lập trình Java', 2, 1),
       ('Tìm hiểu về JDK, JRE, JVMPage', 2, 1),
       ('Hiển thị thời gian của hệ thống (v.2023)', 3, 1),
       ('Tạo và sử dụng trình biên dịch Java (javac)Page', 3, 1),
       ('Sử dụng toán tử', 3, 1),
       ('Ứng dụng chuyển đổi tiền tệ', 1, 1),
       ('Cấu trúc lặp trong JavaPage', 2, 2),
       ('Giới thiệu vòng lặp', 4, 2),
       ('Vòng lặp Do While', 4, 2),
       ('Vòng lặp For', 4, 2),
       ('Vòng lặp While', 4, 2),
       ('Kiểm tra số nguyên tố (v.2023)', 3, 2),
       ('Hiển thị các loại hình', 1, 2),
       ('Mảng trong Java', 2, 3),
       ('Phương thức trong Java', 2, 3),
       ('Phương thức static', 2, 3),
       ('Phương thức non-static', 2, 3),
       ('Phương thức main', 2, 3),
       ('Lớp và đối tượng trong Java', 2, 4),
       ('Phương thức get và set', 2, 4),
       ('Đảo ngược các phần tử của mảng (v.2023)', 3, 4),
       ('Tính tổng các số ở một cột xác định', 1, 4),
       ('Getter và SetterPage', 2, 5),
       ('Package & Static methodPage', 4, 5),
       ('Static Method (v.2023)', 3, 5),
       ('Xây dựng lớp chỉ ghi trong Java', 1, 5),
       ('Giới thiệu Spring MVC Framework 1Page', 2, 14),
       ('Các bước xử lý trong một ứng dụng web Spring MVCPage', 4, 14),
       (' Ứng dụng quản lý danh sách khách hàng ', 3, 14),
       ('Ứng dụng chuyển đổi tiền tệ', 1, 14),
       ('HTTP Header - Thuộc tính produces', 2, 15),
       ('Request Parameters và Path VariablesPage', 4, 15),
       ('Thiết lập thông tin form', 2, 15),
       ('Thiết lập thông tin form (v.2023)', 3, 15),
       ('Ứng dụng máy tính cá nhân', 1, 15),
       ('Giới thiệu và cấu hình Thymeleaf trong Spring MVCPage', 2, 16),
       ('Các biểu thức của ThymeleafPage', 4, 16),
       (' Sử dụng thymeleaf cho ứng dụng Quản lý Dữ liệu Khách hàng (v.2023)', 3, 16),
       ('Sử dụng thymeleaf cho ứng dụng quản lý sản phẩm', 1, 16);


-- them du lieu account
insert
into account (username, password)
values ('admin', '$2a$10$wKRMPSqhgrme1etVLMP1hOKxGaGIQR3KJYGeryuzznUGStlFWz04S'),
       ('employee',
        '$2a$10$wKRMPSqhgrme1etVLMP1hOKxGaGIQR3KJYGeryuzznUGStlFWz04S'),
       ('student1',
        '$2a$10$wKRMPSqhgrme1etVLMP1hOKxGaGIQR3KJYGeryuzznUGStlFWz04S'),
       ('student2',
        '$2a$10$wKRMPSqhgrme1etVLMP1hOKxGaGIQR3KJYGeryuzznUGStlFWz04S');
insert into role (name)
values ('ADMIN'),
       ('EMPLOYEE'),
       ('STUDENT');
insert into account_role (account_id, role_id)
values (1, 1),
       (2, 2),
       (3, 3),
       (4, 3);
-- them du lieu employee_position
insert into employee_position (name)
values ('Trưởng phòng'),
       ('Nhân viên'),
       ('Giáo viên');
-- them du lieu employee
insert into employee (name, email, gender, address, phone, birth_date, image_url, salary, position_id, account_id)
values ('Admin', '123@gmail.com', 1, 'Hà Nội', '0123456789', '1990-01-01', 'https://www.google.com', 1000, 1, 1),
       ('Employee', '134@gmail', 1, 'Hà Nội', '0123456789', '1990-01-01', 'https://www.google.com', 1000, 2, 2),
       ('Teacher', '145@gmail', 1, 'Hà Nội', '0123456789', '1990-01-01', 'https://www.google.com', 1000, 3, 3);
-- them du lieu class
insert into class (name, employee_id, course_id)
values ('Java FullStack j0724', 3, 1),
       ('PHP 1', 3, 2),
       ('Python 1', 3, 3),
       ('C# 1', 3, 4);
-- them du lieu student
insert into student (name, email, gender, address, phone, birth_date, image_url, class_id, account_id)
values ('Đặng Huu Hải Minh', 'minhdhh91@gmail', 1, 'Đà Nẵng', '0774524480', '1990-05-18', 'https://www.google.com', 1,
        1),
       ('Bùi Văn Lưu', 'buivanluu@gmail', 1, 'Huế', '0338857575', '1997-10-01', 'https://www.google.com', 1, 2),
       ('Nguyễn Quang Mạnh Hưng', 'hungnguyen6@gmail', 1, 'Quảng Nam', '0123456789', '1998-01-01',
        'https://www.google.com', 1, null),
       ('Hoang Ngọc Hiếu', 'hieu@gmail', 1, 'Quảng Trị', '0858577454', '2001-01-11', 'https://www.google.com', 1, null),
       ('Nguyễn Hoàng Linh', 'linh@gmail', 1, 'Đà Nẵng', '0333577454', '1998-11-11', 'https://www.google.com', 1, null);

-- the du lieu progress
insert into progress (status, student_id, activity_id)
values (false, 1, 1),
       (false, 1, 2),
       (false, 1, 3),
       (false, 1, 4),
       (false, 2, 1),
       (false, 2, 2),
       (false, 2, 3),
       (false, 2, 4),
       (false, 3, 1),
       (false, 3, 2),
       (false, 3, 3),
       (false, 3, 4),
       (false, 4, 1),
       (false, 4, 2),
       (false, 4, 3),
       (false, 4, 4),
       (false, 5, 1),
       (false, 5, 2),
       (false, 5, 3);
-- them du lieu bang attendance
insert into attendance (status, note, student_id, class_id, employee_id)
values ('VANG_CO_PHEP', 'bị ốm', 1, 1, 3),
       ('CO_MAT', 'đi học đúng giờ', 2, 1, 3),
       ('DI_MUON', 'đi học muộn', 3, 1, 3),
       ('VANG_KHONG_PHEP', 'vắng không phép', 4, 1, 3);
-- the du lieu bang score
insert into score (theory, practice, student_id, module_id)
values (80, 90, 1, 1),
       (70, 80, 2, 1),
       (60, 70, 3, 1),
       (50, 60, 4, 1);

-- them du lieu bang dailynote

insert into dailynote (create_at, content, is_delete, employee_id, class_id)
VALUES ('2023-01-01 10:00:00', 'Hello everyone, today is a good day!', false, 3, 1),
       ('2024-04-23 14:02:33', 'Một số bạn chưa nop bai tap', false,3,1);














